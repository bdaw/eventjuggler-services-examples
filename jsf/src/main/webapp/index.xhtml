<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">

<h:head>
    <title>JSF Example</title>
    <script src="#{initParam['ejs.url']}/ejs-identity/js/login.js"></script>
</h:head>

<h:body>
    <h:panelGroup rendered="#{!user.loggedIn}">
        <h1>Login with form on Identity Broker</h1>
        <p><a href="#{initParam['ejs.url']}/ejs-identity/api/login/#{initParam['ejs.appKey']}">Login</a></p>

        <hr/>
        
        <h1>Login with embedded form</h1>
        <div id="login-form"></div>
    
        <script>
    	    identityBroker.appKey = "#{initParam['ejs.appKey']}";
        	identityBroker.baseUrl = "#{initParam['ejs.url']}/ejs-identity";
        	identityBroker.renderLoginForm("login-form");
    	</script>
    </h:panelGroup>

    <h:panelGroup rendered="#{user.loggedIn}">
        <p>Logged in #{user.name}</p>

        <p><a href="index.jsf?token=logout">Logout</a></p>
    </h:panelGroup>
    
</h:body>

</html>